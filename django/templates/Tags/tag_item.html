<!-- 
    SPDX-License-Identifier: AGPL-3.0-or-later
    Copyright (C) 2023 Julian Lapenna
-->

{% extends 'base/base.html' %}
{% load static %}

{% block page_heading %}Tag Info{% endblock %}

{% block main_content %}

<body>
    <section>
        <p>Tag text: {{ tag.text }}</p>
        <p>User: {{ tag.user }}</p>
        <p>Time: {{ tag.time }}</p>
        <p>Associated codes:
            {{ tag.task.first.code }}
            {% for task in tag.task.all|slice:"1:" %} <!-- so that it doesn't end with a comma -->
            , {{ task.code }}
            {% endfor %}</p>
        <p>Used: {{ tag.task.count }} times</p>

        <form action="{% url 'tag_edit' tag.text %}" method="POST">
            {% csrf_token %}
            {{ form.as_p }}
            <input type="submit" value="Save changes">
        </form>
    </section><br>
    <section>
        <div>
            <a href="{% url 'tags_landing' %}">Back to all tags</a>
            <button style="float: right; margin-right: 2%;" onclick="location.href='{% url 'tag_delete' tag.text %}';"
             class="delete-button">Delete tag</button>
        </div>
    </section>
</body>
{% endblock %}